var U=t=>{throw TypeError(t)};var W=(t,e,s)=>e.has(t)||U("Cannot "+s);var r=(t,e,s)=>(W(t,e,"read from private field"),s?s.call(t):e.get(t)),d=(t,e,s)=>e.has(t)?U("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),h=(t,e,s,a)=>(W(t,e,"write to private field"),a?a.call(t,s):e.set(t,s),s);var _=(t,e,s,a)=>({set _(i){h(t,e,i,s)},get _(){return r(t,e,a)}});import{a as T,t as he,c as le}from"../chunks/disclose-version.CadwTKgb.js";import{h as pe,x as ve,p as H,aJ as be,f as I,j as $,s as Pe,a as R,c as G,r as V,t as Qe,aI as Oe,$ as X}from"../chunks/runtime.894U78pH.js";import{s as ce}from"../chunks/snippet.KmiypEU6.js";import{s as we}from"../chunks/render.xGvF74QX.js";import{i as Me}from"../chunks/if.c-k1-6Nt.js";import{a as qe,p as De}from"../chunks/props.C4GxO_TE.js";import{S as fe,l as de,Q as Ae,n as f,m as Y,o as Z,b as p,q as Fe,u as Ce,v as ke,f as Ee,w as ee,a as te,x as Se,h as se,y as ae,z as _e,A as Ke}from"../chunks/context.0PKaMQDM.js";import{M as Te}from"../chunks/mutation.CXoJFZIq.js";import"../chunks/legacy.DbdqsDTS.js";import{i as He}from"../chunks/lifecycle.CXqBtWHR.js";import{o as Ie,a as Re}from"../chunks/index-client._UCGtw6r.js";function je(t,e,s,a,i){var l;pe&&ve();var n=(l=e.$$slots)==null?void 0:l[s],o=!1;n===!0&&(n=e.children,o=!0),n===void 0||n(t,o?()=>a:a)}var Be=he('<div class="snackbar"><p> </p></div>'),Ne=he("<!> <!>",1);function xe(t,e){H(e,!0);let s=Oe(null);be("showSnackbar",l=>{X(s,qe(l)),setTimeout(()=>{X(s,null)},3e3)});var i=Ne(),n=I(i);Me(n,()=>$(s),l=>{var m=Be(),A=G(m),k=G(A,!0);V(A),V(m),Qe(()=>we(k,$(s))),T(l,m)});var o=Pe(n,2);ce(o,()=>e.children),T(t,i),R()}var g,ne,ze=(ne=class extends fe{constructor(e={}){super();d(this,g);this.config=e,h(this,g,new Map)}build(e,s,a){const i=s.queryKey,n=s.queryHash??de(i,s);let o=this.get(n);return o||(o=new Ae({cache:this,queryKey:i,queryHash:n,options:e.defaultQueryOptions(s),state:a,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){r(this,g).has(e.queryHash)||(r(this,g).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=r(this,g).get(e.queryHash);s&&(e.destroy(),s===e&&r(this,g).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){f.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return r(this,g).get(e)}getAll(){return[...r(this,g).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(a=>Y(s,a))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(a=>Y(e,a)):s}notify(e){f.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){f.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){f.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},g=new WeakMap,ne),c,C,ue,Je=(ue=class extends fe{constructor(e={}){super();d(this,c);d(this,C);this.config=e,h(this,c,new Map),h(this,C,Date.now())}build(e,s,a){const i=new Te({mutationCache:this,mutationId:++_(this,C)._,options:e.defaultMutationOptions(s),state:a});return this.add(i),i}add(e){const s=K(e),a=r(this,c).get(s)??[];a.push(e),r(this,c).set(s,a),this.notify({type:"added",mutation:e})}remove(e){var a;const s=K(e);if(r(this,c).has(s)){const i=(a=r(this,c).get(s))==null?void 0:a.filter(n=>n!==e);i&&(i.length===0?r(this,c).delete(s):r(this,c).set(s,i))}this.notify({type:"removed",mutation:e})}canRun(e){var a;const s=(a=r(this,c).get(K(e)))==null?void 0:a.find(i=>i.state.status==="pending");return!s||s===e}runNext(e){var a;const s=(a=r(this,c).get(K(e)))==null?void 0:a.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}clear(){f.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...r(this,c).values()].flat()}find(e){const s={exact:!0,...e};return this.getAll().find(a=>Z(s,a))}findAll(e={}){return this.getAll().filter(s=>Z(e,s))}notify(e){f.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return f.batch(()=>Promise.all(e.map(s=>s.continue().catch(p))))}},c=new WeakMap,C=new WeakMap,ue);function K(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function re(t){return{onFetch:(e,s)=>{var k,j,B,N,x;const a=e.options,i=(B=(j=(k=e.fetchOptions)==null?void 0:k.meta)==null?void 0:j.fetchMore)==null?void 0:B.direction,n=((N=e.state.data)==null?void 0:N.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},m=0;const A=async()=>{let O=!1;const E=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(e.signal.aborted?O=!0:e.signal.addEventListener("abort",()=>{O=!0}),e.signal)})},me=Fe(e.options,e.fetchOptions),z=async(y,v,F)=>{if(O)return Promise.reject();if(v==null&&y.pages.length)return Promise.resolve(y);const S={queryKey:e.queryKey,pageParam:v,direction:F?"backward":"forward",meta:e.options.meta};E(S);const ge=await me(S),{maxPages:J}=e.options,L=F?Ce:ke;return{pages:L(y.pages,ge,J),pageParams:L(y.pageParams,v,J)}};if(i&&n.length){const y=i==="backward",v=y?Le:ie,F={pages:n,pageParams:o},S=v(a,F);l=await z(F,S,y)}else{const y=t??n.length;do{const v=m===0?o[0]??a.initialPageParam:ie(a,l);if(m>0&&v==null)break;l=await z(l,v),m++}while(m<y)}return l};e.options.persister?e.fetchFn=()=>{var O,E;return(E=(O=e.options).persister)==null?void 0:E.call(O,A,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=A}}}function ie(t,{pages:e,pageParams:s}){const a=e.length-1;return e.length>0?t.getNextPageParam(e[a],e,s[a],s):void 0}function Le(t,{pages:e,pageParams:s}){var a;return e.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,e[0],e,s[0],s):void 0}var u,b,P,w,M,Q,q,D,oe,ye=(oe=class{constructor(t={}){d(this,u);d(this,b);d(this,P);d(this,w);d(this,M);d(this,Q);d(this,q);d(this,D);h(this,u,t.queryCache||new ze),h(this,b,t.mutationCache||new Je),h(this,P,t.defaultOptions||{}),h(this,w,new Map),h(this,M,new Map),h(this,Q,0)}mount(){_(this,Q)._++,r(this,Q)===1&&(h(this,q,Ee.subscribe(async t=>{t&&(await this.resumePausedMutations(),r(this,u).onFocus())})),h(this,D,ee.subscribe(async t=>{t&&(await this.resumePausedMutations(),r(this,u).onOnline())})))}unmount(){var t,e;_(this,Q)._--,r(this,Q)===0&&((t=r(this,q))==null||t.call(this),h(this,q,void 0),(e=r(this,D))==null||e.call(this),h(this,D,void 0))}isFetching(t){return r(this,u).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return r(this,b).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=r(this,u).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const s=this.defaultQueryOptions(t),a=r(this,u).build(this,s);return t.revalidateIfStale&&a.isStaleByTime(te(s.staleTime,a))&&this.prefetchQuery(s),Promise.resolve(e)}}getQueriesData(t){return r(this,u).findAll(t).map(({queryKey:e,state:s})=>{const a=s.data;return[e,a]})}setQueryData(t,e,s){const a=this.defaultQueryOptions({queryKey:t}),i=r(this,u).get(a.queryHash),n=i==null?void 0:i.state.data,o=Se(e,n);if(o!==void 0)return r(this,u).build(this,a).setData(o,{...s,manual:!0})}setQueriesData(t,e,s){return f.batch(()=>r(this,u).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=r(this,u).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=r(this,u);f.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=r(this,u),a={type:"active",...t};return f.batch(()=>(s.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(a,e)))}cancelQueries(t={},e={}){const s={revert:!0,...e},a=f.batch(()=>r(this,u).findAll(t).map(i=>i.cancel(s)));return Promise.all(a).then(p).catch(p)}invalidateQueries(t={},e={}){return f.batch(()=>{if(r(this,u).findAll(t).forEach(a=>{a.invalidate()}),t.refetchType==="none")return Promise.resolve();const s={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(s,e)})}refetchQueries(t={},e){const s={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},a=f.batch(()=>r(this,u).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let n=i.fetch(void 0,s);return s.throwOnError||(n=n.catch(p)),i.state.fetchStatus==="paused"?Promise.resolve():n}));return Promise.all(a).then(p)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=r(this,u).build(this,e);return s.isStaleByTime(te(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(p).catch(p)}fetchInfiniteQuery(t){return t.behavior=re(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(p).catch(p)}ensureInfiniteQueryData(t){return t.behavior=re(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ee.isOnline()?r(this,b).resumePausedMutations():Promise.resolve()}getQueryCache(){return r(this,u)}getMutationCache(){return r(this,b)}getDefaultOptions(){return r(this,P)}setDefaultOptions(t){h(this,P,t)}setQueryDefaults(t,e){r(this,w).set(se(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...r(this,w).values()];let s={};return e.forEach(a=>{ae(t,a.queryKey)&&(s={...s,...a.defaultOptions})}),s}setMutationDefaults(t,e){r(this,M).set(se(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...r(this,M).values()];let s={};return e.forEach(a=>{ae(t,a.mutationKey)&&(s={...s,...a.defaultOptions})}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...r(this,P).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=de(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===_e&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...r(this,P).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){r(this,u).clear(),r(this,b).clear()}},u=new WeakMap,b=new WeakMap,P=new WeakMap,w=new WeakMap,M=new WeakMap,Q=new WeakMap,q=new WeakMap,D=new WeakMap,oe);function Ue(t,e){H(e,!1);let s=De(e,"client",24,()=>new ye);Ie(()=>{s().mount()}),Ke(s()),Re(()=>{s().unmount()}),He();var a=le(),i=I(a);je(i,e,"default",{}),T(t,a),R()}function it(t,e){H(e,!0);const s=new ye({defaultOptions:{queries:{refetchOnWindowFocus:!0,retry:!1}}});Ue(t,{client:s,children:(a,i)=>{xe(a,{children:(n,o)=>{var l=le(),m=I(l);ce(m,()=>e.children),T(n,l)},$$slots:{default:!0}})},$$slots:{default:!0}}),R()}export{it as component};
